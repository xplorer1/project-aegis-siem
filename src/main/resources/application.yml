spring:
  application:
    name: aegis-siem

server:
  port: 8080
  
# WebFlux server for ingestion
spring.webflux:
  base-path: /api

# Management endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    export:
      prometheus:
        enabled: true

# Logging configuration
logging:
  level:
    root: INFO
    com.aegis: INFO

# Aegis Buffer Configuration
aegis:
  kafka:
    # Kafka topic names (defaults)
    normalized-events-topic: normalized-events
    alerts-topic: alerts
    dead-letter-queue-topic: dead-letter-queue
    # Consumer group for Flink correlation engine
    consumer-group: aegis-correlation-engine
  buffer:
    queue-directory: ./data/buffer-queue
    roll-cycle: HOURLY
  ratelimit:
    capacity: 10000
    refill-rate: 1000
  flink:
    # Parallelism: number of parallel operator instances
    # Should be set based on available CPU cores (typically 2x cores)
    parallelism: 4
    # Maximum parallelism for future scaling without state loss
    max-parallelism: 128
    # Checkpoint interval in milliseconds (1 minute)
    checkpoint-interval: 60000
    # Checkpoint timeout in milliseconds (10 minutes)
    checkpoint-timeout: 600000
    # Minimum pause between checkpoints in milliseconds (30 seconds)
    min-pause-between-checkpoints: 30000
    # Checkpoint storage directory
    checkpoint-dir: file:///tmp/flink-checkpoints
    # Restart strategy: number of attempts
    restart-attempts: 3
    # Restart strategy: delay between attempts in milliseconds
    restart-delay: 10000
